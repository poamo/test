<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>수학의 달인 - 1:1 맞춤 수학 전문학원</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            line-height: 1.6;
            color: #333;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1rem 0;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: #ffd700;
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://images.unsplash.com/photo-1509228468518-180dd4864904?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80');
            background-size: cover;
            background-position: center;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
        }

        .hero-content h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            font-weight: 700;
        }

        .hero-content p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            max-width: 600px;
        }

        .cta-button {
            display: inline-block;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 15px 40px;
            text-decoration: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4);
        }

        .cta-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.6);
        }

        /* Section Common Styles */
        .section {
            padding: 80px 0;
            max-width: 1200px;
            margin: 0 auto;
            padding-left: 2rem;
            padding-right: 2rem;
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            color: #2c3e50;
            position: relative;
        }
        
        .section-title2 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 3rem;
            color: white;
            position: relative;
        }
        .section-title::after {
            content: '';
            display: block;
            width: 80px;
            height: 4px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            margin: 1rem auto;
            border-radius: 2px;
        }

        /* Features Section */
        .features {
            background: #f8f9fa;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 3rem;
            margin-top: 3rem;
        }

        .feature-card {
            background: white;
            padding: 2.5rem;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .feature-icon {
            font-size: 3rem;
            color: #667eea;
            margin-bottom: 1.5rem;
        }

        .feature-card h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
            color: #2c3e50;
        }

        /* Achievements Section */
        .achievements {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            text-align: center;
        }

        .achievement-item h3 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .achievement-item p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        /* Teachers Section */
        .teachers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 3rem;
            margin-top: 3rem;
        }

        .teacher-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }

        .teacher-card:hover {
            transform: translateY(-5px);
        }

        .teacher-image {
            width: 100%;
            height: 250px;
            background-size: cover;
            background-position: center;
        }

        .teacher-info {
            padding: 2rem;
            text-align: center;
        }

        .teacher-info h3 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: #2c3e50;
        }

        .teacher-info p {
            color: #666;
            margin-bottom: 1rem;
        }

        .teacher-speciality {
            background: #e8f4f8;
            color: #2980b9;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            display: inline-block;
        }

        /* Reviews Section */
        .reviews {
            background: #f8f9fa;
        }

        .reviews-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .review-card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            position: relative;
        }

        .review-stars {
            color: #ffd700;
            font-size: 1.2rem;
            margin-bottom: 1rem;
        }

        .review-text {
            font-style: italic;
            margin-bottom: 1.5rem;
            line-height: 1.8;
        }

        .review-author {
            font-weight: 600;
            color: #2c3e50;
        }

        /* AI Features Section */
        .ai-features {
            background: #eef1f5; /* Light gray background */
            padding: 80px 0;
        }

        .ai-card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.08);
            margin-bottom: 2rem;
        }

        .ai-card h3 {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: #667eea;
            text-align: center;
        }

        .ai-input-group {
            margin-bottom: 1.5rem;
        }

        .ai-input-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #555;
        }

        .ai-input-group input,
        .ai-input-group textarea,
        .ai-input-group select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .ai-input-group input:focus,
        .ai-input-group textarea:focus,
        .ai-input-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .ai-button {
            display: block;
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .ai-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }

        .ai-response-area {
            background: #f0f4f7;
            padding: 1.5rem;
            border-radius: 10px;
            margin-top: 1.5rem;
            border: 1px dashed #a0a6b7;
            min-height: 100px;
            white-space: pre-wrap; /* Preserve whitespace and line breaks */
            word-wrap: break-word; /* Break long words */
            color: #444;
            font-size: 1rem;
            line-height: 1.8;
        }

        .loading-indicator {
            text-align: center;
            margin-top: 1.5rem;
            font-style: italic;
            color: #888;
        }
        
        .error-message {
            color: #e74c3c;
            text-align: center;
            margin-top: 1.5rem;
        }


        /* Contact Section */
        .contact {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
        }

        .contact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }

        .contact-info h3 {
            font-size: 2rem;
            margin-bottom: 2rem;
        }

        .contact-item {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .contact-item i {
            font-size: 1.5rem;
            margin-right: 1rem;
            color: #3498db;
        }

        .contact-form {
            background: rgba(255,255,255,0.1);
            padding: 2rem;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            background: rgba(255,255,255,0.9);
            font-size: 1rem;
        }

        .form-group textarea {
            height: 120px;
            resize: vertical;
        }

        .submit-btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
        }

        /* Footer */
        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 2rem 0;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hero-content h1 {
                font-size: 2.5rem;
            }

            .hero-content p {
                font-size: 1.1rem;
            }

            .contact-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .section {
                padding-left: 1rem;
                padding-right: 1rem;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeInUp 0.8s ease-out;
        }

        /* Scroll Reveal */
        .scroll-reveal {
            opacity: 0;
            transform: translateY(50px);
            transition: all 0.6s ease-out;
        }

        .scroll-reveal.revealed {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <nav>
            <div class="logo">🧮 수학의 달인</div>
            <ul class="nav-links">
                <li><a href="#home">홈</a></li>
                <li><a href="#features">특징</a></li>
                <li><a href="#teachers">강사진</a></li>
                <li><a href="#reviews">후기</a></li>
                <li><a href="#ai-features">AI 학습 도우미</a></li>
                <li><a href="#contact">문의</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content fade-in">
            <h1>수학, 이제 쉽고 재미있게!</h1>
            <p>개인 맞춤형 1:1 수업으로 수학 실력을 확실하게 향상시켜드립니다.<br>
            20년 경력의 전문 강사진과 함께 수학의 즐거움을 발견하세요.</p>
            <a href="#contact" class="cta-button">무료 상담 신청하기</a>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="section features">
        <h2 class="section-title scroll-reveal">왜 수학의 달인을 선택해야 할까요?</h2>
        <div class="features-grid">
            <div class="feature-card scroll-reveal">
                <div class="feature-icon">
                    <i class="fas fa-user-graduate"></i>
                </div>
                <h3>1:1 맞춤 수업</h3>
                <p>학생 개개인의 수준과 학습 스타일에 맞춘 완전 개인화 수업으로 최대 학습 효과를 보장합니다.</p>
            </div>
            <div class="feature-card scroll-reveal">
                <div class="feature-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <h3>체계적인 성적 관리</h3>
                <p>정기적인 평가와 분석을 통해 학습 진도를 체크하고 약점을 보완하는 맞춤형 학습 계획을 제공합니다.</p>
            </div>
            <div class="feature-card scroll-reveal">
                <div class="feature-icon">
                    <i class="fas fa-clock"></i>
                </div>
                <h3>유연한 시간표</h3>
                <p>학생과 학부모의 스케줄에 맞춰 수업 시간을 조정할 수 있어 부담 없이 학습할 수 있습니다.</p>
            </div>
            <div class="feature-card scroll-reveal">
                <div class="feature-icon">
                    <i class="fas fa-medal"></i>
                </div>
                <h3>검증된 교육 방법</h3>
                <p>20년간 축적된 노하우와 최신 교육 트렌드를 결합한 효과적인 수학 학습법을 제공합니다.</p>
            </div>
            <div class="feature-card scroll-reveal">
                <div class="feature-icon">
                    <i class="fas fa-mobile-alt"></i>
                </div>
                <h3>온라인 학습 지원</h3>
                <p>대면 수업과 온라인 수업을 병행하여 언제 어디서나 학습할 수 있는 환경을 제공합니다.</p>
            </div>
            <div class="feature-card scroll-reveal">
                <div class="feature-icon">
                    <i class="fas fa-comments"></i>
                </div>
                <h3>실시간 학부모 소통</h3>
                <p>학습 진행 상황과 성과를 학부모님께 실시간으로 공유하여 투명한 교육 서비스를 제공합니다.</p>
            </div>
        </div>
    </section>

    <!-- Achievements Section -->
    <section class="section achievements">
        <h2 class="section-title scroll-reveal">놀라운 성과를 확인하세요</h2>
        <div class="achievements-grid">
            <div class="achievement-item scroll-reveal">
                <h3>98%</h3>
                <p>성적 향상률</p>
            </div>
            <div class="achievement-item scroll-reveal">
                <h3>500+</h3>
                <p>졸업생 수</p>
            </div>
            <div class="achievement-item scroll-reveal">
                <h3>15년</h3>
                <p>평균 경력</p>
            </div>
            <div class="achievement-item scroll-reveal">
                <h3>4.9/5</h3>
                <p>만족도 평점</p>
            </div>
        </div>
    </section>

    <!-- Teachers Section -->
    <section id="teachers" class="section">
        <h2 class="section-title scroll-reveal">최고의 강사진을 만나보세요</h2>
        <div class="teachers-grid">
            <div class="teacher-card scroll-reveal">
                <div class="teacher-image" style="background-image: url('https://img.stablecog.com/insecure/256w/aHR0cHM6Ly9iLnN0YWJsZWNvZy5jb20vMzgyNjFlYTAtYzdiYy00NGE3LWEyZWQtOTA0NWMxNjBhYTEzLmpwZWc.webp?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80')"></div>
                <div class="teacher-info">
                    <h3>김수학 원장</h3>
                    <p>서울대 수학교육과 졸업<br>20년 경력</p>
                    <span class="teacher-speciality">고등수학 전문</span>
                </div>
            </div>
            <div class="teacher-card scroll-reveal">
                <div class="teacher-image" style="background-image: url('https://ai-previews.123rf.com/ai-txt2img/600nwm/5b6af20a-09db-4cdd-af62-0ee9b74106cd.jpg?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80')"></div>
                <div class="teacher-info">
                    <h3>이미래 선생님</h3>
                    <p>연세대 수학과 졸업<br>15년 경력</p>
                    <span class="teacher-speciality">중등수학 전문</span>
                </div>
            </div>
            <div class="teacher-card scroll-reveal">
                <div class="teacher-image" style="background-image: url('https://img.stablecog.com/insecure/256w/aHR0cHM6Ly9iLnN0YWJsZWNvZy5jb20vNzU3NWMyOGEtMTdjYi00YjYzLTg4NzMtNDAxOWQwOWM3MjM4LmpwZWc.webp?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80')"></div>
                <div class="teacher-info">
                    <h3>박천재 선생님</h3>
                    <p>고려대 수학과 졸업<br>12년 경력</p>
                    <span class="teacher-speciality">초등수학 전문</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Reviews Section -->
    <section id="reviews" class="section reviews">
        <h2 class="section-title scroll-reveal">학생과 학부모 후기</h2>
        <div class="reviews-grid">
            <div class="review-card scroll-reveal">
                <div class="review-stars">★★★★★</div>
                <p class="review-text">"수학을 포기하려던 아이가 이제는 수학이 제일 재미있다고 해요. 1:1 맞춤 수업의 효과가 정말 대단합니다!"</p>
                <p class="review-author">- 중학교 2학년 김○○ 학부모</p>
            </div>
            <div class="review-card scroll-reveal">
                <div class="review-stars">★★★★★</div>
                <p class="review-text">"선생님이 제 수준에 맞춰서 차근차근 설명해주셔서 이해가 정말 잘 돼요. 성적도 2등급 올랐어요!"</p>
                <p class="review-author">- 고등학교 1학년 이○○</p>
            </div>
            <div class="review-card scroll-reveal">
                <div class="review-stars">★★★★★</div>
                <p class="review-text">"온라인 수업도 대면 수업만큼 효과적이에요. 언제든지 질문할 수 있어서 좋습니다."</p>
                <p class="review-author">- 중학교 3학년 박○○</p>
            </div>
        </div>
    </section>

    <!-- AI Features Section (New) -->
    <section id="ai-features" class="section ai-features">
        <h2 class="section-title scroll-reveal">✨ AI 학습 도우미</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Math Problem Explainer -->
            <div class="ai-card scroll-reveal">
                <h3>✨ 수학 문제 해설 도우미</h3>
                <p class="text-sm text-gray-600 mb-4">풀리지 않는 수학 문제를 입력하면, AI가 단계별로 친절하게 해설해 드립니다.</p>
                <div class="ai-input-group">
                    <label for="mathProblemInput">수학 문제 입력:</label>
                    <textarea id="mathProblemInput" rows="5" placeholder="예: 이차방정식 $x^2 - 5x + 6 = 0$ 의 근을 구하시오."></textarea>
                </div>
                <button id="solveProblemButton" class="ai-button">✨ 해설 요청하기</button>
                <!-- START: Explicitly hidden on load -->
                <div id="problemExplanation" class="ai-response-area" style="display: none;"></div> 
                <div id="problemLoading" class="loading-indicator" style="display: none;">해설 생성 중...</div> 
                <div id="problemError" class="error-message" style="display: none;">오류가 발생했습니다. 다시 시도해 주세요.</div> 
                <!-- END: Explicitly hidden on load -->
            </div>

            <!-- Personalized Study Plan Suggester -->
            <div class="ai-card scroll-reveal">
                <h3>✨ 맞춤 학습 계획 제안</h3>
                <p class="text-sm text-gray-600 mb-4">현재 학년, 단원, 어려움 정도를 입력하면 AI가 맞춤 학습 계획을 제안해 드립니다.</p>
                <div class="ai-input-group">
                    <label for="gradeSelect">학년:</label>
                    <select id="gradeSelect">
                        <option value="초등학교">초등학교</option>
                        <option value="중학교 1학년">중학교 1학년</option>
                        <option value="중학교 2학년">중학교 2학년</option>
                        <option value="중학교 3학년">중학교 3학년</option>
                        <option value="고등학교 1학년">고등학교 1학년</option>
                        <option value="고등학교 2학년">고등학교 2학년</option>
                        <option value="고등학교 3학년">고등학교 3학년</option>
                    </select>
                </div>
                <div class="ai-input-group">
                    <label for="mathTopicInput">수학 단원 (예: 미적분, 확률과 통계):</label>
                    <input type="text" id="mathTopicInput" placeholder="예: 다항식, 도형의 성질">
                </div>
                <div class="ai-input-group">
                    <label for="difficultySelect">어려움 정도:</label>
                    <select id="difficultySelect">
                        <option value="쉬움">쉬움</option>
                        <option value="보통">보통</option>
                        <option value="어려움">어려움</option>
                        <option value="매우 어려움">매우 어려움</option>
                    </select>
                </div>
                <button id="generatePlanButton" class="ai-button">✨ 계획 제안받기</button>
                <!-- START: Explicitly hidden on load -->
                <div id="studyPlanOutput" class="ai-response-area" style="display: none;"></div> 
                <div id="planLoading" class="loading-indicator" style="display: none;">계획 생성 중...</div> 
                <div id="planError" class="error-message" style="display: none;">오류가 발생했습니다. 다시 시도해 주세요.</div> 
                <!-- END: Explicitly hidden on load -->
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="section contact">
        <h2 class="section-title2 scroll-reveal">지금 바로 상담받으세요!</h2>
        <div class="contact-grid">
            <div class="contact-info scroll-reveal">
                <h3>📞 무료 상담 신청</h3>
                <div class="contact-item">
                    <i class="fas fa-phone"></i>
                    <span>02-1234-5678</span>
                </div>
                <div class="contact-item">
                    <i class="fas fa-envelope"></i>
                    <span>info@mathmaster.co.kr</span>
                </div>
                <div class="contact-item">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>서울시 강남구 테헤란로 123</span>
                </div>
                <div class="contact-item">
                    <i class="fas fa-clock"></i>
                    <span>평일 9:00-22:00, 주말 10:00-18:00</span>
                </div>
            </div>
            <form class="contact-form scroll-reveal">
                <div class="form-group">
                    <label for="name">이름</label>
                    <input type="text" id="name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="phone">연락처</label>
                    <input type="tel" id="phone" name="phone" required>
                </div>
                <div class="form-group">
                    <label for="grade_contact">학년</label>
                    <input type="text" id="grade_contact" name="grade" placeholder="예: 중학교 2학년">
                </div>
                <div class="form-group">
                    <label for="message_contact">문의사항</label>
                    <textarea id="message_contact" name="message" placeholder="궁금한 점을 자유롭게 적어주세요"></textarea>
                </div>
                <button type="submit" class="submit-btn">상담 신청하기</button>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 수학의 달인. 모든 권리 보유.</p>
    </footer>

    <script>
        // Scroll Animation
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('revealed');
                }
            });
        }, observerOptions);

        // Observe all scroll-reveal elements
        document.querySelectorAll('.scroll-reveal').forEach(el => {
            observer.observe(el);
        });

        // Smooth Scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Contact Form Submission Handling
        document.querySelector('.contact-form').addEventListener('submit', function(e) {
            e.preventDefault();
            // In a real application, you'd send this data to a server
            alert('상담 신청이 완료되었습니다! 빠른 시일 내에 연락드리겠습니다.');
            this.reset();
        });

        // Header Scroll Effect
        window.addEventListener('scroll', function() {
            const header = document.querySelector('header');
            if (window.scrollY > 100) {
                header.style.background = 'rgba(102, 126, 234, 0.95)';
                header.style.backdropFilter = 'blur(10px)';
            } else {
                header.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
                header.style.backdropFilter = 'none';
            }
        });

        // Gemini API Integration - Math Problem Explainer
        const mathProblemInput = document.getElementById('mathProblemInput');
        const solveProblemButton = document.getElementById('solveProblemButton');
        const problemExplanation = document.getElementById('problemExplanation');
        const problemLoading = document.getElementById('problemLoading');
        const problemError = document.getElementById('problemError');

        solveProblemButton.addEventListener('click', async () => {
            const problem = mathProblemInput.value.trim();

            // Reset UI state at the beginning
            problemExplanation.textContent = ''; 
            problemExplanation.style.display = 'none'; // Ensure hidden initially
            problemLoading.style.display = 'none'; // Ensure hidden initially
            problemError.style.display = 'none'; // Ensure hidden initially
            solveProblemButton.disabled = true; // Disable button immediately

            if (!problem) {
                problemExplanation.textContent = '수학 문제를 입력해주세요.';
                problemExplanation.style.color = '#e74c3c'; // Set error color
                problemExplanation.style.display = 'block'; // Show error message in explanation area
                solveProblemButton.disabled = false; // Re-enable button
                return;
            }

            problemLoading.style.display = 'block'; // Show loading indicator
            
            try {
                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: `다음 수학 문제를 단계별로 자세히 설명해 주세요: ${problem}` }] });
                const payload = { contents: chatHistory };
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    problemExplanation.innerHTML = text; // Use innerHTML for formatted text
                    problemExplanation.style.color = '#444'; // Set to default success color
                    problemExplanation.style.display = 'block'; // Show explanation
                } else {
                    problemError.textContent = '해설을 생성하는 데 실패했습니다. 잠시 후 다시 시도해 주세요.';
                    problemError.style.display = 'block'; // Show specific error message
                }
            } catch (error) {
                console.error('Error fetching math problem explanation:', error);
                problemError.textContent = '네트워크 오류가 발생했습니다. 인터넷 연결을 확인해 주세요.';
                problemError.style.display = 'block'; // Show network error message
            } finally {
                problemLoading.style.display = 'none'; // Always hide loading indicator
                solveProblemButton.disabled = false; // Always re-enable button
            }
        });

        // Gemini API Integration - Personalized Study Plan Suggester
        const gradeSelect = document.getElementById('gradeSelect');
        const mathTopicInput = document.getElementById('mathTopicInput');
        const difficultySelect = document.getElementById('difficultySelect');
        const generatePlanButton = document.getElementById('generatePlanButton');
        const studyPlanOutput = document.getElementById('studyPlanOutput');
        const planLoading = document.getElementById('planLoading');
        const planError = document.getElementById('planError');

        generatePlanButton.addEventListener('click', async () => {
            const grade = gradeSelect.value;
            const topic = mathTopicInput.value.trim();
            const difficulty = difficultySelect.value;

            // Reset UI state at the beginning
            studyPlanOutput.textContent = '';
            studyPlanOutput.style.display = 'none'; // Ensure hidden initially
            planLoading.style.display = 'none'; // Ensure hidden initially
            planError.style.display = 'none'; // Ensure hidden initially
            generatePlanButton.disabled = true; // Disable button immediately

            if (!topic) {
                studyPlanOutput.textContent = '학습할 수학 단원을 입력해주세요.';
                studyPlanOutput.style.color = '#e74c3c'; // Set error color
                studyPlanOutput.style.display = 'block'; // Show error message in output area
                generatePlanButton.disabled = false; // Re-enable button
                return;
            }

            planLoading.style.display = 'block'; // Show loading indicator
            
            try {
                let chatHistory = [];
                const prompt = `저는 ${grade} 학생이고, 수학 ${topic}이 ${difficulty} 수준입니다. ${topic} 학습을 위한 맞춤형 학습 계획 (주요 학습 주제, 예상 마일스톤, 효과적인 학습 팁)을 JSON 형식으로 제안해주세요.`;
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });

                const payload = {
                    contents: chatHistory,
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: "OBJECT",
                            properties: {
                                "mainTopics": { "type": "ARRAY", "items": { "type": "STRING" } },
                                "milestones": { "type": "ARRAY", "items": { "type": "STRING" } },
                                "studyTips": { "type": "ARRAY", "items": { "type": "STRING" } }
                            },
                            "propertyOrdering": ["mainTopics", "milestones", "studyTips"]
                        }
                    }
                };
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const jsonString = result.candidates[0].content.parts[0].text;
                    const parsedJson = JSON.parse(jsonString);

                    let outputHtml = '<strong>✨ 맞춤 학습 계획:</strong><br><br>';
                    outputHtml += '<strong>주요 학습 주제:</strong><ul>';
                    if (parsedJson.mainTopics && parsedJson.mainTopics.length > 0) {
                        parsedJson.mainTopics.forEach(topic => {
                            outputHtml += `<li>${topic}</li>`;
                        });
                    } else {
                        outputHtml += '<li>제안된 주요 학습 주제가 없습니다.</li>';
                    }
                    outputHtml += '</ul><br>';

                    outputHtml += '<strong>예상 마일스톤:</strong><ul>';
                    if (parsedJson.milestones && parsedJson.milestones.length > 0) {
                        parsedJson.milestones.forEach(milestone => {
                            outputHtml += `<li>${milestone}</li>`;
                        });
                    } else {
                        outputHtml += '<li>제안된 예상 마일스톤이 없습니다.</li>';
                    }
                    outputHtml += '</ul><br>';

                    outputHtml += '<strong>효과적인 학습 팁:</strong><ul>';
                    if (parsedJson.studyTips && parsedJson.studyTips.length > 0) {
                        parsedJson.studyTips.forEach(tip => {
                            outputHtml += `<li>${tip}</li>`;
                        });
                    } else {
                        outputHtml += '<li>제안된 효과적인 학습 팁이 없습니다.</li>';
                    }
                    outputHtml += '</ul>';

                    studyPlanOutput.innerHTML = outputHtml;
                    studyPlanOutput.style.color = '#444'; // Set to default success color
                    studyPlanOutput.style.display = 'block'; // Show output
                } else {
                    planError.textContent = '학습 계획을 생성하는 데 실패했습니다. 잠시 후 다시 시도해 주세요.';
                    planError.style.display = 'block'; // Show specific error message
                }
            } catch (error) {
                console.error('Error fetching study plan:', error);
                planError.textContent = '네트워크 오류가 발생했습니다. 인터넷 연결을 확인해 주세요.';
                planError.style.display = 'block'; // Show network error message
            } finally {
                planLoading.style.display = 'none'; // Always hide loading indicator
                generatePlanButton.disabled = false; // Always re-enable button
            }
        });
    </script>
</body>
</html>
